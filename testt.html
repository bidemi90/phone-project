<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        button {
            width: 100px;
            height: 100px;
            border-radius: 10px;
        }

        .messageappscreen {
            width: 300px;
            height: 600px;
            background-color: red;
            position: relative;
        }

        .divtoshowmessage {
            display: flex;
            flex-direction: column;
            background-color: rgba(0, 128, 0, 0.486);
            width: 100%;
            height: 100%;
        }

        .forme,
        .forsomeoneelse {
            max-width: 50%;
            max-height: 200px;
            margin-bottom: 5px;
            padding: 10px;
            border-radius: 5px;
            color: white;
            background-color: red;
            overflow-wrap: break-word;
            overflow-y: auto;
        }

        .forme::-webkit-scrollbar,
        .forsomeoneelse ::-webkit-scrollbar {
            display: none;
        }

        .forme {
            align-self: flex-end;
        }

        .forsomeoneelse {
            align-self: flex-start;
        }

        .onemessagetogotooneperson {
            width: 100%;
            background-color: pink;
            display: flex;
            align-items: center;
            justify-content: space-evenly;
            border: 1px solid blue;
            box-sizing: border-box;
            color: white;
        }

        .onemessagetogotooneperson img {
            width: 50px;
            height: 50px;
            border-radius: 50px;
        }

        .onemessagetogotooneperson div {
            width: 70%;
            background-color: rgb(55, 255, 0);
        }

        .onemessagetogotooneperson div p {
            margin: 0;
            margin-bottom: 5px;
            color: white;

        }

        .divforsendingnewmessage {
            position: absolute;
            bottom: 0;
            background-color: fuchsia;
            width: 100%;
            display: flex;
            justify-content: space-evenly;
            align-items: center;
        }

        .sendnewmessage {
            width: 50px;
            height: fit-content;
        }
    </style>
</head>

<body>
    <h1>am sure this should be clear</h1>
    <p>use your image src in the array</p>
    <button onclick="messageapp()">
        message app
    </button>

</body>




</html>
<script>

    let contactarray = [
        {
            name: "abdullahi",
            Image: "yourimg",
            phonenumber: "08083135400"
        },
        {
            name: "yusuf",
            Image: "yourimg",
            phonenumber: "08083135401"
        },
        {
            name: "usman",
            Image: "yourimg",
            phonenumber: "08083135402"
        },
    ]

    let messagearray = [
        {
            name: "yusuf",
            Image: "yourimg",
            phonenumber: "08083135401",
            message: [
                {
                    sentfrom: "me",
                    messagesent: "hi"
                },
                {
                    sentfrom: "someoneelse",
                    messagesent: "aova bro"
                }
            ]
        },
        {
            name: "usman",
            Image: "yourimg",
            phonenumber: "08083135402",
            message: [
                {
                    sentfrom: "me",
                    messagesent: "bro bug will not kill us ooo"
                },
                {
                    sentfrom: "someoneelse",
                    messagesent: "omo we no go give up ni o"
                }
            ]
        },
    ]


    function messageapp(params) {
        document.body.innerHTML +=
            `
            <section class="messageappscreen" id="messageappscreen">
        

    </section>
`
        // this for loop print all of the person you have message before and the last message
        for (let index = 0; index < messagearray.length; index++) {
            const element = messagearray[index];
            // checkthis place very very well

            // this lastmessage is to get the last message of one one person 

            let lastmessage = messagearray[index].message[messagearray[index].message.length - 1]
            console.log(lastmessage);
            document.getElementById("messageappscreen").innerHTML +=
                `
        <div class="onemessagetogotooneperson" onclick="onemessagetogotooneperson(${index})">
            <img src="${messagearray[index].Image}" alt="">
           <div>
             <p>${messagearray[index].name}</p>
              <p>${lastmessage.messagesent}</p>
           </div>
          </div>
`

        }
    }

    function onemessagetogotooneperson(index) {
        // i clear the screen
        document.getElementById("messageappscreen").innerHTML = ""
        // printing new screen in main screen
        document.getElementById("messageappscreen").innerHTML += `
            <div class="divtoshowmessage" id="divtoshowmessage">
   
            </div>
            `
        document.getElementById("messageappscreen").innerHTML += `
        <div class="divforsendingnewmessage" id="divforsendingnewmessage">
    <input type="text" id="sendingnewmessageinput">
    <button class="sendnewmessage" onclick="sendnewmessage(${index})">
        send
    </button>
</div>
            `
        console.log(messagearray[index].message.length);
        // i  log the length of  the message of that index

        // for the for loop you know the normal for loop we use but because we are using the index inside the function before we will not use it so i use {i}

        for (let i = 0; i < messagearray[index].message.length; i++) {
            const element = messagearray[index].message[i];
            console.log(element);
            // now we need  an if  else statement to diff my message from yours

            if (element.sentfrom == "me") {
                document.getElementById("divtoshowmessage").innerHTML += `
                <div class="forme">${element.messagesent}</div>`
            } else {
                document.getElementById("divtoshowmessage").innerHTML += `
    <div class="forsomeoneelse">${element.messagesent}</div>

            `
            }

        }

    }

    // youthe project will only allow you to beable tosend message so you will only be the person that we will pushing to the array so all message we push to that person index will be  sentfrom: "me"
    function sendnewmessage(index) {
        messagearray[index].message.push(
            {
                sentfrom: "me",
                // and the messagewe be the value of the input
                messagesent: document.getElementById("sendingnewmessageinput").value
            }
        )

        // then after that the for loop should reprint but it should clear the formal one

        document.getElementById("divtoshowmessage").innerHTML = ""

        for (let i = 0; i < messagearray[index].message.length; i++) {
            const element = messagearray[index].message[i];
            console.log(element);
            // now we need  an if  else statement to diff my message from yours

            if (element.sentfrom == "me") {
                document.getElementById("divtoshowmessage").innerHTML += `
                <div class="forme">${element.messagesent}</div>`
            } else {
                document.getElementById("divtoshowmessage").innerHTML += `
    <div class="forsomeoneelse">${element.messagesent}</div>

            `
            }

        }
        document.getElementById("sendingnewmessageinput").value = ""
    }
</script>
<!-- dont forget to add all the back button  -->